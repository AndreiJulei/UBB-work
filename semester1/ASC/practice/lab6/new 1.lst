     1                                  bits 32 ; assembling for the 32 bits architecture
     2                                  
     3                                  ; declare the EntryPoint (a label defining the very first instruction of the program)
     4                                  global start        
     5                                  
     6                                  ; declare external functions needed by our program
     7                                  extern exit               ; tell nasm that exit exists even if we won't be defining it
     8                                  import exit msvcrt.dll    ; exit is a function that ends the calling process. It is defined in msvcrt.dll
     9                                                            ; msvcrt.dll contains exit, printf and all the other important C-runtime specific functions
    10                                  
    11                                  ; our data is declared here (the variables needed by our program)
    12                                  segment data use32 class=data
    13                                      ; ...
    14 00000000 0A09020704030C0B08-     	s dd 0702090Ah, 0B0C0304h, 05060108h
    14 00000009 010605             
    15                                  	l equ ($-s)/4
    16 0000000C 00<rept>                	r times l*2 db 0
    17                                  
    18                                  ; our code starts here
    19                                  segment code use32 class=code
    20                                      start:
    21                                          ; ...
    22 00000000 BE[00000000]            		mov esi,s
    23 00000005 B906000000              		mov ecx,l*2
    24 0000000A 31C0                    		xor eax,eax
    25 0000000C 31DB                    		xor ebx,ebx
    26 0000000E BF[0C000000]            		mov edi,r
    27                                  		
    28                                  		repeta:
    29 00000013 8A1E                    			mov bl,byte[esi]
    30 00000015 46                      			inc esi
    31 00000016 8A06                    			mov al,byte[esi]
    32 00000018 46                      			inc esi
    33 00000019 B210                    			mov dl,16
    34 0000001B F6E2                    			mul dl
    35 0000001D 00D8                    			add al,bl
    36                                  			
    37 0000001F 8807                    			mov byte[edi],al
    38 00000021 47                      			inc edi
    39 00000022 E2EF                    		loop repeta
    40                                  		
    41 00000024 BE[0C000000]            		mov esi,r
    42 00000029 B906000000              		mov ecx,l*2 
    43 0000002E 49                      		dec ecx 			; for bubble sort 
    44                                      
    45                                      bubblesort_outer_loop:
    46 0000002F BF00000000                      mov edi,0                   ; index for esi
    47                                  
    48                                          bubblesort_inner_loop:
    49 00000034 8A043E                              mov al, [esi + edi]      ; load the current byte
    50 00000037 8A5C3E01                            mov bl, [esi + edi + 1]  ; load the next byte
    51 0000003B 38D8                                cmp al, bl               ; compare the two bytes
    52 0000003D 7F0A                                jg swap_octets           ; if al < bl, swap the two bytes
    53                                  
    54                                          ; Move to the next pair
    55 0000003F 47                              inc edi
    56 00000040 39CF                            cmp edi, ecx                 ; if edi < ecx go back 
    57 00000042 7CF0                            jl bubblesort_inner_loop
    58                                          ; Move to outer loop
    59 00000044 49                              dec ecx
    60 00000045 75E8                            jnz bubblesort_outer_loop   
    61 00000047 EB0F                            jmp end_
    62                                  
    63                                      swap_octets:
    64                                  
    65 00000049 88C2                    		mov dl,al
    66 0000004B 88D8                            mov al,bl
    67 0000004D 88D3                            mov bl,dl                       ; swap the two elements
    68 0000004F 88043E                          mov [esi + edi], al             ; store the bigger value in al
    69 00000052 885C3E01                        mov [esi + edi + 1], bl         ; store the smaller value in bl
    70                                          
    71 00000056 EBDC                    	    jmp bubblesort_inner_loop   
    72                                  		
    73                                  		
    74                                  		
    75                                  		end_:
    76                                          ; exit(0)
    77 00000058 6A00                            push    dword 0      ; push the parameter for exit onto the stack
    78 0000005A FF15[00000000]                  call    [exit]       ; call exit to terminate the program
